{% extends 'layout.html.twig' %}

{% block content %}
<div class="row">
    <div class="col-md-12"></div>
    <div class="jumbotron row">
        {#<div class="row">#}
            {#<div class="text-center"><h2> {{ 'user.detail'|trans }}</h2></div>#}
        {#</div>#}
        {#<div class="row">#}
            {#<div class="col-md-offset-4">#}
        <div class="errors alert alert-danger hidden"></div>
                <div class="w3-container">
                    <div class="w3-card">
                        <header class="w3-container w3-blue">
                            <h1>{{ client.firstname|capitalize }} {{ client.lastname|capitalize }}</h1>
                        </header>
                        <div class="w3-container col-md-offset-2">
                            <p>{{ 'user.adress.label'|trans }}: {{ client.adress }}</p>
                            <p>{{ 'user.city.label'|trans }}: {{ client.city|capitalize }}</p>
                            <p>{{ 'user.zipcode.label'|trans }}: {{ client.zipCode }}</p>
                            <p>{{ 'user.tel.label'|trans }}: {{ client.tel }}</p>
                            <p>{{ 'user.mail.label'|trans }}: {{ client.mail }}</p>
                            <p>{{ 'user.birthDate.label'|trans }}: {{ client.birthDate }}</p>
                            <p>{{ 'user.birthCity.label'|trans }}: {{ client.birthCity }}</p>
                        </div>
                    </div>
                </div>
        {#</div>#}
        {#</div>#}

        <div class="row">
            <div class="col-md-offset-4">
                <a class="btn btn-primary" href="{{ path('user_homepage') }}">{{ 'user.return'|trans }}</a>
                <a class="btn btn-warning" href="{{ path('user_edit', { 'id': client.id }) }}">{{ 'user.edit'|trans }}</a>
                {%  if(client.actif) %}
                    {% set class = " btn-danger" %}
                    {% set txt = 'user.activation.true' %}
                {%  else %}
                    {% set class = " btn-success" %}
                    {% set txt = 'user.activation.false' %}
                {%  endif %}
                <button class="btn{{ class }} user-activation-button" data-id="{{ client.id }}">{{ txt|trans }}</button>
            </div>
        </div>

        <br>
        <h2>Historiques : </h2><button class="btn btn-success user-historical-button" data-toggle="modal" data-target="#myModal">Cr√©er un historique de contact</button>
        <table class="table table-striped">
            <th>{{ 'historical.methode'|trans }}</th>
            <th>{{ 'historical.description'|trans }}</th>
            <th>{{ 'historical.createDate'|trans }}</th>

        {% for histo in client.historical %}
            <tr>
                <td>{{ histo.methode }}</td>
                <td>{{ histo.description }}</td>
                <td>{{ histo.dateCreate|date('d/m/Y') }}</td>
            </tr>

        {% endfor %}
        </table>
    </div>

</div>


    <div class="modal fade" id="myModal" tabindex="-1" role="dialog" aria-labelledby="myModalLabel">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button>
                    <h4 class="modal-title" id="myModalLabel">Historique de contact</h4>
                </div>
                <div class="modal-body">
                    {{ form_start(form, {'method': 'POST', 'action': path('historical_create')}) }}
                    <input type="hidden" id="userId" name="userId" value={{ client.id }}>
                    <input type="hidden" id="from" name="from" value="userPage">
                    {{ form_row(form.methode) }}
                    {{ form_row(form.description) }}

                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                    <input type="submit" class="btn btn-primary"></input>
                </div>
                {{ form_end(form) }}
            </div>
        </div>
    </div>
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script src = "{{ asset('bundles/user/js/script.js') }}"></script>

{% endblock %}
